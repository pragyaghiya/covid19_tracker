!function(e){var t={};function n(a){if(t[a])return t[a].exports;var r=t[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(a,r,function(t){return e[t]}.bind(null,r));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=1)}([function(e,t,n){},function(e,t,n){"use strict";n.r(t);n(0);var a=function(){var e=new Date;e.setDate(e.getDate()-1);var t=e.getDate();return e.getMonth()+1+"/"+t+"/"+(e.getYear()+1900).toString().slice(2,4)},r=function(){var e=new Date;e.setDate(e.getDate()-2);var t=e.getDate();return e.getMonth()+1+"/"+t+"/"+(e.getYear()+1900).toString().slice(2,4)},o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(0===e.length)return a();if(e){var t=e.slice(5,7);2===t.length&&(t=t[1]);var n=e.slice(8,10);2===n.length&&"0"===n[0]&&(n=n[1]);var r=e.slice(2,4);return t+"/"+n+"/"+r}a()},s=function(e){var t=e.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.join(".")},i=function(e,t){for(var n,a=t,r=document.getElementById("calendarInput"),i=document.getElementById("backToCountries"),c=document.getElementById("chinaCheckbox"),d=document.getElementById("chinaCheckboxLabel"),u=(document.getElementById("calendarInputCountry"),document.getElementById("graphTitle")),v=document.getElementsByClassName("toggle"),f=document.getElementsByClassName("tooltip"),p=0;p<f.length;p++)f[p].remove();n=!!c.checked,v[0]&&v[0].setAttribute("class","hide"),c.setAttribute("class","hide"),d.setAttribute("class","hide"),i.setAttribute("class","show"),u.innerHTML=e,d3.selectAll("g").remove();var y=a.filter((function(e){return e.provinceStateCases>10}));y.sort((function(e,t){return e.provinceStateCases<t.provinceStateCases?1:-1}));for(var h=0;h<y.length;h++){var g=y[h].provinceStateCases-(y[h].provinceStateDeaths+y[h].provinceStateRecoveries);Object.assign(y[h],{provinceStateAdjustedCases:g})}for(var m=d3.stack().keys(["provinceStateAdjustedCases","provinceStateRecoveries","provinceStateDeaths"])(y).map((function(e){return e.forEach((function(t,n){t.key=e.key,t.idx=n})),e})),b=d3.max(y,(function(e){return+e.provinceStateCases})),S=30,x=10,C=10,k=150,R=d3.scaleLinear().domain([0,b]).range([0,1200]),D=d3.scaleBand().domain(y.map((function(e){return e.provinceState}))).range([S,1200-C]).padding(.1),I=0,_=0,O=0,w=0,E=0;E<y.length;E++)I+=y[E].provinceStateCases,_+=y[E].provinceStateAdjustedCases,O+=y[E].provinceStateDeaths,w+=y[E].provinceStateRecoveries;var j=d3.select("#horzBarChart").attr("width",1400).attr("height",1200),A=j.append("g"),B=(A.append("text").attr("class","totalCases").style("font-family","'Open Sans', sans-serif").style("color","green").style("font-size","22px").style("z-index","10").style("font-weight","bold").attr("x",(function(){return 1200-x-200})).attr("y",(function(){return 300})).text((function(){return"Total Reported Cases: ".concat(s(I))})),A.append("text").attr("class","totalAdjustedCount").style("font-family","'Open Sans', sans-serif").style("color","black").style("font-size","18px").style("z-index","10").attr("x",(function(){return 1200-x-200})).attr("y",(function(){return 340})).text((function(){return"Unresolved Reported Cases: ".concat(s(_))})),A.append("text").attr("class","totalRecoveries").style("font-family","'Open Sans', sans-serif").style("color","black").style("font-size","18px").style("z-index","10").attr("x",(function(){return 1200-x-200})).attr("y",(function(){return 360})).text((function(){return"Reported Recoveries: ".concat(s(w))})),A.append("text").attr("class","totalDeaths").style("font-family","'Open Sans', sans-serif").style("color","black").style("font-size","18px").style("z-index","10").attr("x",(function(){return 1200-x-200})).attr("y",(function(){return 380})).text((function(){return"Reported Deaths: ".concat(s(O))})),d3.select("body").append("div").attr("class","tooltip").style("position","absolute").style("font-family","'Open Sans', sans-serif").style("color","gray").style("font-size","14px").style("z-index","10").style("visibility","hidden"));A.append("g").selectAll("g").data(m).join("g").selectAll("rect").data((function(e){return e})).join("rect").attr("x",(function(e){return R(e[0])+k})).attr("y",(function(e){return D(e.data.provinceState)})).attr("width",(function(e){return R(e[1])-R(e[0])})).attr("height",D.bandwidth()).attr("fill",(function(e){return"provinceStateDeaths"===e.key?"#bf212e":"provinceStateRecoveries"===e.key?"#27b376":"#264b96"})).on("mouseover",(function(e){var t="";return"provinceStateAdjustedCases"===e.key?t="Unresolved Reported Cases":"provinceStateDeaths"===e.key?t="Reported Deaths":"provinceStateRecoveries"===e.key&&(t="Reported Recoveries"),B.style("visibility","visible").text("".concat(t,": ").concat(e.data[e.key]))})).on("mousemove",(function(e){var t="";return"provinceStateAdjustedCases"===e.key?t="Unresolved Reported Cases":"provinceStateDeaths"===e.key?t="Reported Deaths":"provinceStateRecoveries"===e.key&&(t="Reported Recoveries"),B.style("top",d3.event.pageY-10+"px").style("left",d3.event.pageX+10+"px").text("".concat(t,": ").concat(s(e.data[e.key])))})).on("mouseout",(function(e){return B.style("visibility","hidden")})).on("click",(function(e){window.location.search="",B.style("visibility","hidden"),l(n,o(r.value))}));j.append("g").call((function(e){return e.attr("transform","translate(".concat(k,",").concat(S,")")).call(d3.axisTop(R).ticks(14,"s")).call((function(e){return e.selectAll(".domain").remove()}))}));j.append("g").call((function(e){return e.attr("transform","translate(".concat(k,", 0)")).call(d3.axisLeft(D).tickSizeOuter(0)).call((function(e){return e.selectAll(".domain").remove()}))}))},c=function(e,t){t&&delete e.China;for(var n=document.getElementById("backToCountries"),a=document.getElementById("chinaCheckbox"),r=document.getElementById("chinaCheckboxLabel"),o=document.getElementsByClassName("tooltip"),c=document.getElementById("graphTitle"),l=0;l<o.length;l++)o[l].remove();d3.selectAll("g").remove(),n.setAttribute("class","hide"),a.setAttribute("class","show"),r.setAttribute("class","show"),c.innerHTML="Global";for(var d=Object.keys(e).slice(0,-1),u=Object.values(e).slice(0,-1),v=0;v<u.length;v++){var f=u[v].totalCases-(u[v].totalRecoveries+u[v].totalDeaths);Object.assign(u[v],{"Country/Region":d[v],casesMinusDeathsAndRecoveries:f})}u.sort((function(e,t){return e.totalCases<t.totalCases?1:-1})),u=u.slice(0,50),d=d.slice(0,50);for(var p=d3.max(u,(function(e){return+e.totalCases})),y=d3.stack().keys(["casesMinusDeathsAndRecoveries","totalRecoveries","totalDeaths"])(u).map((function(e){return e.forEach((function(t,n){t.key=e.key,t.idx=n})),e})),h=30,g=10,m=10,b=150,S=d3.select("#horzBarChart").attr("width",1400).attr("height",1800),x=S.append("g"),C=d3.scaleLinear().domain([0,p]).range([0,1200]),k=d3.scaleBand().domain(u.map((function(e){return e["Country/Region"]}))).range([h,1800-m]).padding(.1),R=0,D=0,I=0,_=0,O=0;O<u.length;O++)R+=u[O].totalCases,D+=u[O].casesMinusDeathsAndRecoveries,I+=u[O].totalDeaths,_+=u[O].totalRecoveries;var w=d3.select("body").append("div").attr("class","tooltip").style("position","absolute").style("font-family","'Open Sans', sans-serif").style("color","gray").style("font-size","14px").style("z-index","1").style("visibility","hidden");x.append("text").attr("class","totalCases").style("font-family","'Open Sans', sans-serif").style("color","green").style("font-size","22px").style("z-index","10").style("font-weight","bold").attr("x",(function(){return 1200-g-200})).attr("y",(function(){return 450})).text((function(){return"Total Reported Cases: ".concat(s(R))})),x.append("text").attr("class","totalAdjustedCount").style("font-family","'Open Sans', sans-serif").style("color","black").style("font-size","18px").style("z-index","10").attr("x",(function(){return 1200-g-200})).attr("y",(function(){return 490})).text((function(){return"Unresolved Reported Cases: ".concat(s(D))})),x.append("text").attr("class","totalRecoveries").style("font-family","'Open Sans', sans-serif").style("color","black").style("font-size","18px").style("z-index","10").attr("x",(function(){return 1200-g-200})).attr("y",(function(){return 510})).text((function(){return"Reported Recoveries: ".concat(s(_))})),x.append("text").attr("class","totalDeaths").style("font-family","'Open Sans', sans-serif").style("color","black").style("font-size","18px").style("z-index","10").attr("x",(function(){return 1200-g-200})).attr("y",(function(){return 530})).text((function(){return"Reported Deaths: ".concat(s(I))}));x.append("g").selectAll("g").data(y).join("g").selectAll("rect").data((function(e){return e})).join("rect").attr("x",(function(e){return C(e[0])+b})).attr("y",(function(e){return k(e.data["Country/Region"])})).attr("width",(function(e,t){return C(e[1])-C(e[0])})).attr("height",k.bandwidth()).attr("fill",(function(e){return"totalDeaths"===e.key?"#bf212e":"totalRecoveries"===e.key?"#27b376":"#264b96"})).on("mouseover",(function(e){var t="";return"casesMinusDeathsAndRecoveries"===e.key?t="Unresolved Reported Cases":"totalDeaths"===e.key?t="Reported Deaths":"totalRecoveries"===e.key&&(t="Reported Recoveries"),w.style("visibility","visible").text("".concat(t,": ").concat(e.data[e.key]))})).on("mousemove",(function(e){var t="";return"casesMinusDeathsAndRecoveries"===e.key?t="Unresolved Reported Cases":"totalDeaths"===e.key?t="Reported Deaths":"totalRecoveries"===e.key&&(t="Reported Recoveries"),w.style("top",d3.event.pageY-10+"px").style("left",d3.event.pageX+10+"px").text("".concat(t,": ").concat(s(e.data[e.key])))})).on("mouseout",(function(e){return w.style("visibility","hidden")})).on("click",(function(e){w.style("visibility","hidden"),0===Object.keys(e.data["Province/State"][0]).length?alert("No state, county, or state-level data currently available for "+e.data["Country/Region"]):i(e.data["Country/Region"],e.data["Province/State"])}));S.append("g").call((function(e){return e.attr("transform","translate(".concat(b,",").concat(h,")")).call(d3.axisTop(C).ticks(14,"s")).call((function(e){return e.selectAll(".domain").remove()}))}));S.append("g").call((function(e){return e.attr("transform","translate(".concat(b,", 0)")).call(d3.axisLeft(k).tickSizeOuter(0)).call((function(e){return e.selectAll(".domain").remove()}))}))},l=function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a(),r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=["Cape Verde","Cruise Ship","Kosovo","Diamond Princess","Belize","Laos","Libya","West Bank and Gaza","Guinea-Bissau","Mali","Saint Kitts and Nevis"],s={};d3.csv("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_confirmed_global.csv").then((function(e){e.forEach((function(e){var t=e["Country/Region"],a=e["Province/State"];if(o.includes(t));else if(s[t]){if(""!==a){var r=new Object;Object.assign(r,{provinceState:a,provinceStateCases:parseInt(e[n])}),s[t]["Province/State"].push(r)}s[t]["Province/State"][a],s[t].totalCases+=parseInt(e[n])}else{var i=new Object;""!==a&&Object.assign(i,{provinceState:a,provinceStateCases:parseInt(e[n])}),s[t]={"Province/State":[i],totalCases:parseInt(e[n]),totalDeaths:void 0,totalRecoveries:void 0}}}))})).then((function(){d3.csv("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_deaths_global.csv").then((function(e){e.forEach((function(e){var t=e["Country/Region"],a=e["Province/State"];if(o.includes(t));else if(s[t].totalDeaths?s[t].totalDeaths+=parseInt(e[n]):s[t].totalDeaths=parseInt(e[n]),""!==a)for(var r=s[t]["Province/State"],i=0;i<r.length;i++)if(r[i].provinceState===a){var c=r[i];Object.assign(c,{provinceStateDeaths:parseInt(e[n])})}}))}))})).then((function(){d3.csv("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_recovered_global.csv").then((function(a){a.forEach((function(e){var t=e["Country/Region"],a=e["Province/State"];if(o.includes(t));else if(s[t].totalRecoveries?s[t].totalRecoveries+=parseInt(e[n]):s[t].totalRecoveries=parseInt(e[n]),""!==a)for(var r=s[t]["Province/State"],i=0;i<r.length;i++)if(r[i].provinceState===a){var c=r[i];Object.assign(c,{provinceStateRecoveries:parseInt(e[n])})}})),document.getElementById("asOfTitle").innerHTML="As of ".concat(n);var l=window.location.search.slice(window.location.search.indexOf("=")+1);s.China.totalDeaths?""===r&&""===l?c(s,t):""!==l?i(l,s[l]["Province/State"]):i(r,s[r]["Province/State"]):e(t,n,r)}))}))};window.addEventListener("DOMContentLoaded",(function(){var e=document.createElement("div");e.classList.add("card","center"),document.body.append(e);var t=document.getElementById("chinaCheckbox");t.addEventListener("click",(function(){!function(e){var t;t=!!e.checked;var n=document.getElementById("calendarInput"),s=o(n.value),i=a();r(),(i.split("/")[0]<=s.split("/")[0]&&i.split("/")[1]<parseInt(s.split("/")[1])||s<"1/22/20")&&(s=i),0===s.length?l(t):l(t,s)}(t)}));var n=document.getElementById("calendarInput");n.defaultValue=function(){var e=new Date;e.setDate(e.getDate()-1);var t=e.getDate(),n=e.getMonth()+1;return 1===t.toString().length&&(t="0"+t),1===n.toString().length&&(n="0"+n),(e.getYear()+1900).toString()+"-"+n+"-"+t}(),document.getElementById("backToCountries").addEventListener("click",(function(){var e;e=!!t.checked,window.location.search="";var s=o(n.value),i=(a(),r());(i.split("/")[0]<=s.split("/")[0]&&i.split("/")[1]<parseInt(s.split("/")[1])||s<"1/22/20")&&(s=i,n.value=function(){var e=new Date;e.setDate(e.getDate()-2);var t=e.getDate(),n=e.getMonth()+1;return 1===t.toString().length&&(t="0"+t),1===n.toString().length&&(n="0"+n),(e.getYear()+1900).toString()+"-"+n+"-"+t}()),l(e,s)})),n.addEventListener("change",(function(){!function(e){var t,n=o(e.value);t=!!document.getElementById("chinaCheckbox").checked;var s=a();r(),(s.split("/")[0]<=n.split("/")[0]&&s.split("/")[1]<parseInt(n.split("/")[1])||n<"1/22/20")&&(n=s,alert("Valid dates are between 1/22/2020 and "+s+"20.  Showing default: "+s+"20."));var i=document.getElementById("graphTitle");"Global"!==i.innerHTML?l(t,n,i.innerHTML):l(t,n)}(n)})),l()}))}]);
//# sourceMappingURL=main.js.map